<!DOCTYPE html>
<html dir="ltr">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BB8DNPB73F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('consent', 'default', {
        ad_storage: 'denied',
        analytics_storage: 'denied',
      });
      gtag('js', new Date());
      gtag('config', 'G-BB8DNPB73F');
    </script>
    <script>
      let userAgent = navigator.userAgent || navigator.vendor || window.opera;
      if (/android/i.test(userAgent) || (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream)) {
        
          window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            let deferredPrompt = e;
            let appPromptWrapper = undefined
            if(!document.getElementsByClassName('app-promt-wrapper').length){
              appPromptWrapper = document.createElement('div');
              appPromptWrapper.classList.add('app-promt-wrapper')
              appPromptWrapper.style.display = 'block';
              let icon = document.createElement('img');
              icon.classList.add('icon')
              icon.src = '/public/pwa/icon-180.png';
              let label = document.createElement('span');
              label.innerHTML = 'Odysee App'
              let store = document.createElement('div');
              let storeIcon = document.createElement('img');
              store.classList.add('store')
              if(/android/i.test(userAgent)) storeIcon.src = '/public/img/google-play.png';
              else if(/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) storeIcon.src = '/public/img/apple.png';
              store.appendChild(storeIcon);   
              appPromptWrapper.appendChild(icon);        
              appPromptWrapper.appendChild(label);
              appPromptWrapper.appendChild(store);
              document.body.appendChild(appPromptWrapper);
            }else{
              appPromptWrapper = document.getElementsByClassName('app-promt-wrapper')[0]
            }

            appPromptWrapper.addEventListener('click', (e) => {
              appPromptWrapper.style.display = 'none';
              deferredPrompt.prompt();
              deferredPrompt.userChoice
                .then((choiceResult) => {
                  if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the A2HS prompt');
                  } else {
                    console.log('User dismissed the A2HS prompt');
                  }
                  deferredPrompt = null;
                });
            });
          });      
        }        
      }      
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="preload" href="/public/font/v1/300.woff" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/public/font/v1/300i.woff" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/public/font/v1/400.woff" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/public/font/v1/400i.woff" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/public/font/v1/700.woff" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/public/font/v1/700i.woff" as="font" type="font/woff" crossorigin />

    <link rel="shortcut icon" href="/public/favicon-spaceman.png" />

    <style>
      @font-face {
        font-family: 'Inter';
        font-style: normal;
        font-weight: 300;
        font-display: swap;
        src: url('/public/font/v1/300.woff') format('woff');
      }

      @font-face {
        font-family: 'Inter';
        font-style: italic;
        font-weight: 300;
        font-display: swap;
        src: url('/public/font/v1/300i.woff') format('woff');
      }

      @font-face {
        font-family: 'Inter';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url('/public/font/v1/400.woff') format('woff');
      }

      @font-face {
        font-family: 'Inter';
        font-style: italic;
        font-weight: 400;
        font-display: swap;
        src: url('/public/font/v1/400i.woff') format('woff');
      }

      @font-face {
        font-family: 'Inter';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url('/public/font/v1/700.woff') format('woff');
      }

      @font-face {
        font-family: 'Inter';
        font-style: italic;
        font-weight: 700;
        font-display: swap;
        src: url('/public/font/v1/700i.woff') format('woff');
      }
    </style>

    <!-- VARIABLE_HEAD_BEGIN -->
    <!-- VARIABLE_HEAD_END -->
  </head>

  <body>
    <div id="app"></div>
  </body>
</html>
